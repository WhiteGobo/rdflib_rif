@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rif: <http://www.w3.org/2007/rif#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<http://example.com/2009/prd2#CheckoutRuleset> a rif:Group ;
    rif:sentences ( <http://example.com/2009/prd2#GoldRule> <http://example.com/2009/prd2#DiscountRule> <http://example.com/2009/prd2#NewCustomerAndWidgetRule> <http://example.com/2009/prd2#UnknownStatusRule> ) .

<http://example.com/2009/prd2#DiscountRule> a rif:Group ;
    rif:sentences ( [ a rif:Forall ;
                rif:formula [ a rif:Implies ;
                        rif:if [ a rif:Or ;
                                rif:formulas ( [ a rif:Frame ;
                                            rif:object [ a rif:Var ;
                                                    rif:varname "customer" ] ;
                                            rif:slots ( [ a rif:Slot ;
                                                        rif:slotkey [ a rif:Const ;
                                                                rif:constIRI "http://example.com/2009/prd2#status"^^xsd:anyURI ] ;
                                                        rif:slotvalue [ a rif:Const ;
                                                                rif:constname "Silver" ] ] ) ] [ a rif:Frame ;
                                            rif:object [ a rif:Var ;
                                                    rif:varname "customer" ] ;
                                            rif:slots ( [ a rif:Slot ;
                                                        rif:slotkey [ a rif:Const ;
                                                                rif:constIRI "http://example.com/2009/prd2#status"^^xsd:anyURI ] ;
                                                        rif:slotvalue [ a rif:Const ;
                                                                rif:constname "Gold" ] ] ) ] ) ] ;
                        rif:then [ a rif:Do ;
                                rif:actionVar [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "s" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/2009/prd2#value"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "v" ] ] ) ],
                                    [ a rif:Var ;
                                        rif:varname "s" ],
                                    [ a rif:Var ;
                                        rif:varname "v" ],
                                    [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "customer" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/2009/prd2#shoppingCart"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "s" ] ] ) ] ;
                                rif:actions ( [ a rif:Modify ;
                                            rif:target [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "s" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/2009/prd2#value"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:External ;
                                                                        rif:content [ a rif:Expr ;
                                                                                rif:args ( [ a rif:Var ;
                                                                                            rif:varname "v" ] [ a rif:Const ;
                                                                                            rif:value 0.95 ] ) ;
                                                                                rif:op [ a rif:Const ;
                                                                                        rif:constIRI "http://www.w3.org/2007/rif-builtin-function#numeric-multiply"^^xsd:anyURI ] ] ] ] ) ] ] ) ] ] ;
                rif:pattern [ a rif:Member ;
                        rif:class [ a rif:Const ;
                                rif:constIRI "http://example.com/2009/prd2#Customer"^^xsd:anyURI ] ;
                        rif:instance [ a rif:Var ;
                                rif:varname "customer" ] ] ;
                rif:vars ( [ a rif:Var ;
                            rif:varname "customer" ] ) ] ) .

<http://example.com/2009/prd2#GoldRule> a rif:Group ;
    rif:sentences ( [ a rif:Forall ;
                rif:formula [ a rif:Forall ;
                        rif:formula [ a rif:Implies ;
                                rif:if [ a rif:Exists ;
                                        rif:formula [ a rif:And ;
                                                rif:formulas ( [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "shoppingCart" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://example.com/2009/prd2#value"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "value" ] ] ) ] [ a rif:External ;
                                                            rif:content [ a rif:Atom ;
                                                                    rif:args ( [ a rif:Var ;
                                                                                rif:varname "value" ] [ a rif:Const ;
                                                                                rif:value 2000 ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#numeric-greater-than-or-equal"^^xsd:anyURI ] ] ] ) ] ;
                                        rif:vars ( [ a rif:Var ;
                                                    rif:varname "value" ] ) ] ;
                                rif:then [ a rif:Do ;
                                        rif:actions ( [ a rif:Modify ;
                                                    rif:target [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "customer" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://example.com/2009/prd2#status"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Const ;
                                                                                rif:constname "Gold" ] ] ) ] ] ) ] ] ;
                        rif:pattern [ a rif:Frame ;
                                rif:object [ a rif:Var ;
                                        rif:varname "customer" ] ;
                                rif:slots ( [ a rif:Slot ;
                                            rif:slotkey [ a rif:Const ;
                                                    rif:constIRI "http://example.com/2009/prd2#shoppingCart"^^xsd:anyURI ] ;
                                            rif:slotvalue [ a rif:Var ;
                                                    rif:varname "shoppingCart" ] ] ) ] ;
                        rif:vars ( [ a rif:Var ;
                                    rif:varname "shoppingCart" ] ) ] ;
                rif:pattern [ a rif:And ;
                        rif:formulas ( [ a rif:Member ;
                                    rif:class [ a rif:Const ;
                                            rif:constIRI "http://example.com/2009/prd2#Customer"^^xsd:anyURI ] ;
                                    rif:instance [ a rif:Var ;
                                            rif:varname "customer" ] ] [ a rif:Frame ;
                                    rif:object [ a rif:Var ;
                                            rif:varname "customer" ] ;
                                    rif:slots ( [ a rif:Slot ;
                                                rif:slotkey [ a rif:Const ;
                                                        rif:constIRI "http://example.com/2009/prd2#status"^^xsd:anyURI ] ;
                                                rif:slotvalue [ a rif:Const ;
                                                        rif:constname "Silver" ] ] ) ] ) ] ;
                rif:vars ( [ a rif:Var ;
                            rif:varname "customer" ] ) ] ) .

<http://example.com/2009/prd2#NewCustomerAndWidgetRule> a rif:Group ;
    rif:sentences ( [ a rif:Forall ;
                rif:formula [ a rif:Implies ;
                        rif:if [ a rif:Exists ;
                                rif:formula [ a rif:And ;
                                        rif:formulas ( [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "customer" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/2009/prd2#shoppingCart"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "shoppingCart" ] ] ) ] [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "shoppingCart" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/2009/prd2#containsItem"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Var ;
                                                                        rif:varname "item" ] ] ) ] [ a rif:Member ;
                                                    rif:class [ a rif:Const ;
                                                            rif:constIRI "http://example.com/2009/prd2#Widget"^^xsd:anyURI ] ;
                                                    rif:instance [ a rif:Var ;
                                                            rif:varname "item" ] ] ) ] ;
                                rif:vars ( [ a rif:Var ;
                                            rif:varname "shoppingCart" ] [ a rif:Var ;
                                            rif:varname "item" ] ) ] ;
                        rif:then [ a rif:Do ;
                                rif:actionVar [ a rif:Var ;
                                        rif:varname "val" ],
                                    [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "customer" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/2009/prd2#shoppingCart"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "s" ] ] ) ],
                                    [ a rif:Frame ;
                                        rif:object [ a rif:Var ;
                                                rif:varname "s" ] ;
                                        rif:slots ( [ a rif:Slot ;
                                                    rif:slotkey [ a rif:Const ;
                                                            rif:constIRI "http://example.com/2009/prd2#value"^^xsd:anyURI ] ;
                                                    rif:slotvalue [ a rif:Var ;
                                                            rif:varname "val" ] ] ) ],
                                    [ a rif:Var ;
                                        rif:varname "s" ] ;
                                rif:actions ( [ a rif:Retract ;
                                            rif:target ( [ a rif:Var ;
                                                        rif:varname "customer" ] [ a rif:Const ;
                                                        rif:constIRI "http://example.com/2009/prd2#voucher"^^xsd:anyURI ] ) ] [ a rif:Modify ;
                                            rif:target [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "s" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/2009/prd2#value"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:External ;
                                                                        rif:content [ a rif:Expr ;
                                                                                rif:args ( [ a rif:Var ;
                                                                                            rif:varname "val" ] [ a rif:Const ;
                                                                                            rif:value 0.90 ] ) ;
                                                                                rif:op [ a rif:Const ;
                                                                                        rif:constIRI "http://www.w3.org/2007/rif-builtin-function#numeric-multiply"^^xsd:anyURI ] ] ] ] ) ] ] ) ] ] ;
                rif:pattern [ a rif:And ;
                        rif:formulas ( [ a rif:Member ;
                                    rif:class [ a rif:Const ;
                                            rif:constIRI "http://example.com/2009/prd2#Customer"^^xsd:anyURI ] ;
                                    rif:instance [ a rif:Var ;
                                            rif:varname "customer" ] ] [ a rif:Frame ;
                                    rif:object [ a rif:Var ;
                                            rif:varname "customer" ] ;
                                    rif:slots ( [ a rif:Slot ;
                                                rif:slotkey [ a rif:Const ;
                                                        rif:constIRI "http://example.com/2009/prd2#status"^^xsd:anyURI ] ;
                                                rif:slotvalue [ a rif:Const ;
                                                        rif:constname "New" ] ] ) ] ) ] ;
                rif:vars ( [ a rif:Var ;
                            rif:varname "customer" ] ) ] ) .

<http://example.com/2009/prd2#UnknownStatusRule> a rif:Group ;
    rif:sentences ( [ a rif:Forall ;
                rif:formula [ a rif:Implies ;
                        rif:if [ a rif:INeg ;
                                rif:formula [ a rif:Exists ;
                                        rif:formula [ a rif:And ;
                                                rif:formulas ( [ a rif:Frame ;
                                                            rif:object [ a rif:Var ;
                                                                    rif:varname "customer" ] ;
                                                            rif:slots ( [ a rif:Slot ;
                                                                        rif:slotkey [ a rif:Const ;
                                                                                rif:constIRI "http://example.com/2009/prd2#status"^^xsd:anyURI ] ;
                                                                        rif:slotvalue [ a rif:Var ;
                                                                                rif:varname "status" ] ] ) ] [ a rif:External ;
                                                            rif:content [ a rif:Atom ;
                                                                    rif:args ( [ a rif:Const ;
                                                                                rif:constname "New" ] [ a rif:Const ;
                                                                                rif:constname "Bronze" ] [ a rif:Const ;
                                                                                rif:constname "Silver" ] [ a rif:Const ;
                                                                                rif:constname "Gold" ] [ a rif:Var ;
                                                                                rif:varname "status" ] ) ;
                                                                    rif:op [ a rif:Const ;
                                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-predicate#list-contains"^^xsd:anyURI ] ] ] ) ] ;
                                        rif:vars ( [ a rif:Var ;
                                                    rif:varname "status" ] ) ] ] ;
                        rif:then [ a rif:Do ;
                                rif:actions ( [ a rif:Execute ;
                                            rif:target [ a rif:Atom ;
                                                    rif:args ( [ a rif:External ;
                                                                rif:content [ a rif:Expr ;
                                                                        rif:args ( [ a rif:Const ;
                                                                                    rif:constname "New customer: " ] [ a rif:Var ;
                                                                                    rif:varname "customer" ] ) ;
                                                                        rif:op [ a rif:Const ;
                                                                                rif:constIRI "http://www.w3.org/2007/rif-builtin-function#concat"^^xsd:anyURI ] ] ] ) ;
                                                    rif:op [ a rif:Const ;
                                                            rif:constIRI "http://www.w3.org/2007/rif-builtin-action#print"^^xsd:anyURI ] ] ] [ a rif:Assert ;
                                            rif:target [ a rif:Frame ;
                                                    rif:object [ a rif:Var ;
                                                            rif:varname "customer" ] ;
                                                    rif:slots ( [ a rif:Slot ;
                                                                rif:slotkey [ a rif:Const ;
                                                                        rif:constIRI "http://example.com/2009/prd2#status"^^xsd:anyURI ] ;
                                                                rif:slotvalue [ a rif:Const ;
                                                                        rif:constname "New" ] ] ) ] ] ) ] ] ;
                rif:pattern [ a rif:Member ;
                        rif:class [ a rif:Const ;
                                rif:constIRI "http://example.com/2009/prd2#Customer"^^xsd:anyURI ] ;
                        rif:instance [ a rif:Var ;
                                rif:varname "customer" ] ] ;
                rif:vars ( [ a rif:Var ;
                            rif:varname "customer" ] ) ] ) .

[] a rif:Document ;
    rif:directives () ;
    rif:payload <http://example.com/2009/prd2#CheckoutRuleset> .
